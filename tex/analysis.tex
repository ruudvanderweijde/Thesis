\documentclass[../main.tex]{subfiles}
\begin{document}
    \chapter{Analysis}\label{chap:analysis}

       
% Even een quick reminder
% Dit is een lijst met de top 30 meest populair download (https://packagist.org/explore/popular)
% Allen hebben 2 tot 6 miljoen downloads
% Sorting is gedaan op lines of code (LOC)
% Stats komen uit phploc, na het verwijderen van Tests and tests folders.
% Sommige projects hebben geen directory en file count: phploc gaf hier geen output voor 

In order to validate the performed research we have tested them on the most popular packages of Packagist\footnotemark, which are listed in table \ref{table:corpus}.
\footnotetext{https://packagist.org/explore/popular, July 2014}
The statistics are generated using phploc\footnotemark.
\footnotetext{https://github.com/sebastianbergmann/phploc, July 2014}
All packages have between 2 and 6 million downloads.
Packagist is a repository for Composer\footnotemark projects.
\footnotetext{https://getcomposer.org/, July 2014}
Composer is a dependency manager for PHP projects.
All external plugins for PHP projects can be managed via a composer.json file.
You only need know the name and a version of the external package in the repository of your project.
\npaddmissingzero
\npfourdigitsep
\begin{table}[H]
  \centering
  \scriptsize
  \begin{tabular}{@{}lllrrrrrrrrrr@{}} \toprule
     \multicolumn{3}{c}{Product}        & \multicolumn{2}{c}{Files} & \multicolumn{3}{c}{Objects}        & \multicolumn{5}{c}{Lines of code} \\
     \cmidrule(l{2pt}r{2pt}){1-3}       \cmidrule(l{2pt}r{2pt}){4-5} \cmidrule(l{2pt}r{2pt}){6-8}        \cmidrule(l{2pt}r{2pt}){9-13}                    
     Vendor & Project* & Version           & D$^1$         & F$^2$          & C$^3$ & I$^4$ & T$^5$ & Total $\uparrow$ & \multicolumn{2}{c}{Logical} & \multicolumn{2}{c}{Global$^6$} \\ \midrule
doctrine & lexer & v1.0 & 2 & 7 & \numprint{3} & \numprint{0} & \numprint{0} & \numprint{733} & \numprint{128} & (17.46\%) & \numprint{13} & (10.16\%) \\
phpunit & php-timer & 1.0.5 & 5 & 11 & \numprint{5} & \numprint{0} & \numprint{0} & \numprint{740} & \numprint{117} & (15.81\%) & \numprint{17} & (14.53\%) \\
phpunit & php-text-template & 1.2.2 & 5 & 11 & \numprint{5} & \numprint{0} & \numprint{0} & \numprint{768} & \numprint{125} & (16.28\%) & \numprint{15} & (12.00\%) \\
doctrine & inflector & v1.0 & 2 & 7 & \numprint{3} & \numprint{0} & \numprint{0} & \numprint{853} & \numprint{130} & (15.24\%) & \numprint{13} & (10.00\%) \\
psr-fig & log & 1.0.0 & 3 & 15 & \numprint{8} & \numprint{2} & \numprint{2} & \numprint{1039} & \numprint{155} & (14.92\%) & \numprint{22} & (14.19\%) \\
phpunit & php-file-iterator & 1.3.4 & 5 & 13 & \numprint{7} & \numprint{0} & \numprint{0} & \numprint{1071} & \numprint{176} & (16.43\%) & \numprint{15} & (8.52\%) \\
symfony & filesystem & v2.5.3 & 3 & 11 & \numprint{5} & \numprint{2} & \numprint{0} & \numprint{1090} & \numprint{193} & (17.71\%) & \numprint{19} & (9.84\%) \\
symfony & yaml & v2.5.3 & 3 & 16 & \numprint{11} & \numprint{1} & \numprint{0} & \numprint{2270} & \numprint{509} & (22.42\%) & \numprint{28} & (5.50\%) \\
phpunit & php-token-stream & 1.2.2 & 6 & 13 & \numprint{169} & \numprint{0} & \numprint{0} & \numprint{2360} & \numprint{377} & (15.97\%) & \numprint{15} & (3.98\%) \\
doctrine & collections & v1.2 & 3 & 18 & \numprint{11} & \numprint{3} & \numprint{0} & \numprint{2504} & \numprint{394} & (15.73\%) & \numprint{33} & (8.38\%) \\
symfony & process & v2.5.3 & 3 & 19 & \numprint{14} & \numprint{1} & \numprint{0} & \numprint{3198} & \numprint{604} & (18.89\%) & \numprint{37} & (6.13\%) \\
symfony & finder & v2.5.3 & 8 & 43 & \numprint{36} & \numprint{3} & \numprint{0} & \numprint{4976} & \numprint{909} & (18.27\%) & \numprint{80} & (8.80\%) \\
symfony & dom-crawler & v2.5.3 & 12 & 63 & \numprint{53} & \numprint{6} & \numprint{0} & \numprint{7825} & \numprint{1296} & (16.56\%) & \numprint{157} & (12.11\%) \\
symfony & translation & v2.5.3 & 21 & 121 & \numprint{97} & \numprint{20} & \numprint{0} & \numprint{12345} & \numprint{2299} & (18.62\%) & \numprint{257} & (11.18\%) \\
symfony & console & v2.5.3 & 17 & 84 & \numprint{66} & \numprint{13} & \numprint{2} & \numprint{13546} & \numprint{2556} & (18.87\%) & \numprint{246} & (9.62\%) \\
symfony & http-foundation & v2.5.3 & 16 & 90 & \numprint{76} & \numprint{10} & \numprint{0} & \numprint{14179} & \numprint{2262} & (15.95\%) & \numprint{154} & (6.81\%) \\
twig & twig & v1.16.0 & 18 & 172 & \numprint{148} & \numprint{19} & \numprint{0} & \numprint{14689} & \numprint{2630} & (17.90\%) & \numprint{15} & (0.57\%) \\
symfony & event-dispatcher & v2.5.3 & 27 & 170 & \numprint{133} & \numprint{31} & \numprint{3} & \numprint{20230} & \numprint{3629} & (17.94\%) & \numprint{418} & (11.52\%) \\
swiftmailer & swiftmailer & v5.2.1 & 37 & 238 & \numprint{170} & \numprint{52} & \numprint{0} & \numprint{28965} & \numprint{4645} & (16.04\%) & \numprint{144} & (3.10\%) \\
phpunit & php-code-coverage & 2.0.1 & 62 & 259 & \numprint{381} & \numprint{24} & \numprint{0} & \numprint{50371} & \numprint{6579} & (13.06\%) & \numprint{87} & (1.32\%) \\
phpunit & phpunit & 4.2.2 & 65 & 270 & \numprint{388} & \numprint{26} & \numprint{0} & \numprint{51516} & \numprint{6764} & (13.13\%) & \numprint{129} & (1.91\%) \\
phpunit & phpunit-mock-objects & 2.2.0 & 66 & 271 & \numprint{393} & \numprint{27} & \numprint{0} & \numprint{51735} & \numprint{6801} & (13.15\%) & \numprint{132} & (1.94\%) \\
doctrine & annotations & v1.2.0 & 69 & 306 & \numprint{423} & \numprint{28} & \numprint{0} & \numprint{57325} & \numprint{7718} & (13.46\%) & \numprint{188} & (2.44\%) \\
doctrine & common & v2.4.2 & 76 & 337 & \numprint{440} & \numprint{45} & \numprint{0} & \numprint{62406} & \numprint{8326} & (13.34\%) & \numprint{298} & (3.58\%) \\
symfony & http-kernel & v2.5.3 & 96 & 565 & \numprint{471} & \numprint{90} & \numprint{3} & \numprint{79294} & \numprint{14169} & (17.87\%) & \numprint{1449} & (10.23\%) \\
doctrine & cache & 1.3.0 & 152 & 687 & \numprint{729} & \numprint{102} & \numprint{2} & \numprint{103024} & \numprint{16667} & (16.18\%) & \numprint{1355} & (8.13\%) \\
doctrine & dbal & v2.4.2 & 121 & 557 & \numprint{628} & \numprint{63} & \numprint{0} & \numprint{104630} & \numprint{15234} & (14.56\%) & \numprint{1033} & (6.78\%) \\
guzzle & guzzle & v3.9.2 & 150 & 832 & \numprint{828} & \numprint{141} & \numprint{7} & \numprint{117699} & \numprint{19772} & (16.80\%) & \numprint{1787} & (9.04\%) \\
doctrine & orm & v2.4.4 & 175 & 1007 & \numprint{875} & \numprint{119} & \numprint{2} & \numprint{158530} & \numprint{27932} & (17.62\%) & \numprint{2866} & (10.26\%) \\
monolog & monolog & 1.10.0 & 350 & 1911 & \numprint{1904} & \numprint{135} & \numprint{2} & \numprint{288507} & \numprint{31415} & (10.89\%) & \numprint{4221} & (13.44\%) \\
werkspot & old-Website & 07-2014 & 928 & 6225 & \numprint{4907} & \numprint{224} & \numprint{0} & \numprint{1054686} & \numprint{167978} & (15.93\%) & \numprint{22693} & (13.51\%) \\
  \bottomrule
     \multicolumn{13}{l}{} \\
     \multicolumn{13}{l}{*This is a list of the 30 most popular packages of packagist ordered by total lines of code, in July 2014.} \\
     \multicolumn{13}{l}{$^1$ = Directories, $^2$ = Files, $^3$ = Classes, $^4$ = Interfaces, $^5$ = Traits, $^6$ = Not in class or function} \\
  \end{tabular}
  \normalsize
  \caption{List of analysed projects.\label{table:corpus}}
\end{table}
\npfourdigitnosep
\npnoaddmissingzero

To collect the source code for each project, we have executed the following steps:
\begin{enumerate} \itemsep1pt \parskip0pt \parsep0pt
    \item \texttt{git clone} the github repo.
    \item Run \texttt{composer install}, and the source code including dependencies will be downloaded in the \texttt{/vendor} folder.
    \item Remove the \texttt{autoload.php} and \texttt{composer} folder, as we don't need them.
    \item Remove the test folders by removing all folders matching \texttt{Tests} or \texttt{tests}.
\end{enumerate}

To measure the coverage:
\begin{enumerate} \itemsep1pt \parskip0pt \parsep0pt
    \item \texttt{git clone} the github repo.
    \item Run \texttt{composer install}, and the source code including dependencies will be downloaded in the \texttt{/vendor} folder.
    \item Run the unittests and use xdebug to resolve the types.
    \item Compare the results.
\end{enumerate}


\end{document}
